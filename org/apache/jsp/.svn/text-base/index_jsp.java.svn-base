package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import waf.*;
import acromate.common.util.LanguageMode;
import webuser.ServerLogin;
import java.util.Properties;
import acromate.common.StaticString;

public final class index_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static java.util.List _jspx_dependants;

  public Object getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    JspFactory _jspxFactory = null;
    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;


    try {
      _jspxFactory = JspFactory.getDefaultFactory();
      response.setContentType("text/html; charset=EUC-KR");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");


	String loginFail = request.getParameter("err");
    int nLangType = 0;
   
    LanguageMode lang = new LanguageMode(nLangType);
  

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n");
      out.write("<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=euc-kr\" />\r\n");
      out.write("<title>Biz 포탈</title>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/JavaScript\">\r\n");
      out.write("<!--\r\n");
      out.write("function MM_preloadImages() { //v3.0\r\n");
      out.write("  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();\r\n");
      out.write("    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)\r\n");
      out.write("    if (a[i].indexOf(\"#\")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function MM_swapImgRestore() { //v3.0\r\n");
      out.write("  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function MM_findObj(n, d) { //v4.01\r\n");
      out.write("  var p,i,x;  if(!d) d=document; if((p=n.indexOf(\"?\"))>0&&parent.frames.length) {\r\n");
      out.write("    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}\r\n");
      out.write("  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];\r\n");
      out.write("  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);\r\n");
      out.write("  if(!x && d.getElementById) x=d.getElementById(n); return x;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function MM_swapImage() { //v3.0\r\n");
      out.write("  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)\r\n");
      out.write("   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function SetCookie(name, value, expiredays) \r\n");
      out.write(" { \r\n");
      out.write("    var todayDate = new Date(); \r\n");
      out.write("    todayDate.setDate( todayDate.getDate() + expiredays ); \r\n");
      out.write("    document.cookie = name + \"=\" + escape( value ) + \"; path=/; expires=\" + todayDate.toGMTString() + \";\" \r\n");
      out.write(" } \r\n");
      out.write("\r\n");
      out.write("function getCookieVal (offset) \r\n");
      out.write("{\r\n");
      out.write("    var endstr = document.cookie.indexOf (\";\", offset);\r\n");
      out.write("    if (endstr == -1)\r\n");
      out.write("    endstr = document.cookie.length;\r\n");
      out.write("    return unescape(document.cookie.substring(offset, endstr));\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function GetCookie (name) \r\n");
      out.write("{\r\n");
      out.write("    var arg = name + \"=\";\r\n");
      out.write("    var alen = arg.length;\r\n");
      out.write("    var clen = document.cookie.length;\r\n");
      out.write("    var i = 0;\r\n");
      out.write("    while (i < clen) \r\n");
      out.write("    {\r\n");
      out.write("        var j = i + alen;\r\n");
      out.write("        if (document.cookie.substring(i, j) == arg)\r\n");
      out.write("        return getCookieVal (j);\r\n");
      out.write("        i = document.cookie.indexOf(\" \", i) + 1;\r\n");
      out.write("        if (i == 0) \r\n");
      out.write("        break; \r\n");
      out.write("    }\r\n");
      out.write("    return null;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("//3. cookie에 저장된 정보에서 name을 삭제하는 함수\r\n");
      out.write("//여기에서 삭제한다는 의미는 cookie 정보의 expires 날짜를 과거로 바꾼다는 것을 의미한다.\r\n");
      out.write("function delCookie(name,value) {\r\n");
      out.write("    var todayDate = new Date();\r\n");
      out.write("    todayDate.setDate( todayDate.getDate() + (-1) );\r\n");
      out.write("    if(value != \"\"){\r\n");
      out.write("        document.cookie = name + '=' + escape( value ) + '; path=/; expires=' + todayDate.toGMTString() + ';'\r\n");
      out.write("    }\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function func_loginCommit() {\r\n");
      out.write(" \r\n");
      out.write("  if (document.loginForm.id.value == \"\") {\r\n");
      out.write("     alert(\"");
      out.print(LanguageMode.x("아이디를 입력하세요.","Please insert ID."));
      out.write("\");\r\n");
      out.write("     document.loginForm.id.focus();\r\n");
      out.write("  } else if (document.loginForm.pwd.value == \"\") {\r\n");
      out.write("     alert(\"");
      out.print(LanguageMode.x("패스워드를 입력하세요.","Please insert password."));
      out.write("\");\r\n");
      out.write("     document.loginForm.pwd.focus();\r\n");
      out.write("  } else {\r\n");
      out.write("      if(document.loginForm.id_save.checked){\r\n");
      out.write("        SetCookie(\"id_cookie\",document.loginForm.id.value, 90); //쿠키값 하루 설정\r\n");
      out.write("      }else{\r\n");
      out.write("        delCookie(\"id_cookie\",document.loginForm.id.value);\r\n");
      out.write("      }\r\n");
      out.write("      document.loginForm.submit();\r\n");
      out.write("  }\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function goEnterSubmit(){\r\n");
      out.write(" if((window.event.keyCode)==13){ \r\n");
      out.write("  func_loginCommit();\r\n");
      out.write(" }\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function func_init() {\r\n");
      out.write("    if(GetCookie(\"id_cookie\") == null || GetCookie(\"id_cookie\") == \"\"){\r\n");
      out.write("    }else{\r\n");
      out.write("        document.loginForm.id.value = GetCookie(\"id_cookie\");\r\n");
      out.write("        document.loginForm.id_save.checked = true;\r\n");
      out.write("    }\r\n");
      out.write("\t");

		SessionManager manager = SessionManager.getInstance();
		boolean login = manager.isLogin(request);
		System.out.println("login: " + login);
		int loginState = 0;
		if (login)
			loginState = 1;
		
		String sessionState = request.getParameter("session");
		
		System.out.println("session: " + sessionState);
		
		String updateResult = request.getParameter("updateResult");
	
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("    if (");
      out.print(updateResult);
      out.write(" == \"-1\")\r\n");
      out.write("      alert(\"");
      out.print(LanguageMode.x("시스템 오류로 인하여 종료되었습니다.","It is exited for System Error."));
      out.write("\"+\"\\n\" +\"");
      out.print(LanguageMode.x("다시 로그인해 주십시오." ,"Please enter to try again."));
      out.write("\" );\r\n");
      out.write("\r\n");
      out.write("\tif (");
      out.print(sessionState);
      out.write(" == \"0\")\r\n");
      out.write("\t\talert(\"");
      out.print(LanguageMode.x("세션이 종료되었습니다.","Session Timeout."));
      out.write("\" + \"\\n\" + \"");
      out.print(LanguageMode.x("다시 로그인해 주십시오." ,"Please enter to try again."));
      out.write("\" );\r\n");
      out.write("\t\t\r\n");
      out.write("\tloginFail=\"");
      out.print(loginFail);
      out.write("\";\r\n");
      out.write("\tif (loginFail == \"loginFail\"){\r\n");
      out.write("\t\talert(\"");
      out.print(LanguageMode.x("아이디 혹은 패스워드가 일치하지 않습니다.","Please check ID and password."));
      out.write("\");\r\n");
      out.write("\t}else if (loginFail == \"loginOk1\"){\r\n");
      out.write("        top.location.href = \"/bizportal/buddy/userBuddyList.jsp\";\r\n");
      out.write("    }else if (loginFail == \"loginOk2\"){\r\n");
      out.write("        top.location.href = \"/bizportal/ipcs/ipcsList.jsp\";\r\n");
      out.write("    }\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function func_find(){\r\n");
      out.write("\talert(\"아이디/비밀번호 찾기\");\r\n");
      out.write("\treturn;\r\n");
      out.write("}\r\n");
      out.write("//-->\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("<!--\r\n");
      out.write("body {\r\n");
      out.write("\tbackground-color: #ffffff;\r\n");
      out.write("}\r\n");
      out.write("-->\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<BODY leftmargin=\"0\" topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\" onLoad=\"func_init();\">\r\n");
      out.write("<link href=\"");
      out.print(StaticString.ContextRoot);
      out.write("/css/td_style.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("<form name = \"loginForm\" method=\"post\" action=\"");
      out.print(StaticString.ContextRoot);
      out.write("/mainLogin.do\" >\r\n");
      out.write("    <table width=\"1000\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\">\r\n");
      out.write("        <tr>\r\n");
      out.write("            <td height=\"215\"><img src=\"imgs/Login_mainbg_img.gif\" width=\"1000\" height=\"215\" border=\"0\"></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("        <tr>\r\n");
      out.write("            <td height=\"152\">\r\n");
      out.write("                <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                    <tr>\r\n");
      out.write("                        <td width=\"266\"></td>\r\n");
      out.write("                        <td width=\"290\">\r\n");
      out.write("                            <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                                <tr height=\"15\">\r\n");
      out.write("                                    <td></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"37\">\r\n");
      out.write("                                    <td><img src=\"imgs/Login_ktlogo_img.gif\" width=\"290\" height=\"37\" border=\"0\"></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"100\">\r\n");
      out.write("                                    <td></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                            </table>\r\n");
      out.write("                        </td>\r\n");
      out.write("                        <td width=\"30\"></td>\r\n");
      out.write("                        <td width=\"3\"><img src=\"imgs/Login_devider_img.gif\" width=\"3\" height=\"104\" border=\"0\"></td>\r\n");
      out.write("                        <td width=\"20\"></td>\r\n");
      out.write("                        <td width=\"391\">\r\n");
      out.write("                            <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                                <tr height=\"30\">\r\n");
      out.write("                                    <td colspan=\"2\"></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <!--<tr height=\"20\">\r\n");
      out.write("                                    <td colspan=\"2\">\r\n");
      out.write("                                        <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                                            <tr>\r\n");
      out.write("                                                <td width=\"10\"><input type=\"radio\" name=\"userlog\" value=\"0\" checked></td>\r\n");
      out.write("                                                <td width=\"75\"><img src=\"imgs/Login_userlog_img.gif\" width=\"75\" height=\"20\" border=\"0\"></td>\r\n");
      out.write("                                                <td width=\"10\"><input type=\"radio\" name=\"userlog\" value=\"1\"></td>\r\n");
      out.write("                                                <td><img src=\"imgs/Login_adminlog_img.gif\" width=\"75\" height=\"20\" border=\"0\"></td>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                        </table>\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"10\">\r\n");
      out.write("                                    <td colspan=\"2\"></td>\r\n");
      out.write("                                </tr>-->\r\n");
      out.write("                                <tr height=\"42\">\r\n");
      out.write("                                    <td>\r\n");
      out.write("                                        <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                                            <tr height=\"20\">\r\n");
      out.write("                                                <td align=\"right\" style=\"padding:0px 10px 0px 0px\"><img src=\"imgs/Login_id_img.gif\" width=\"17\" height=\"20\" border=\"0\"></td>\r\n");
      out.write("                                                <td><input type=\"text\" name=\"id\" onKeyUp=\"goEnterSubmit()\" style=\"width:85px;height:14px; ime-mode:inactive;\"></td>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                            <tr height=\"2\">\r\n");
      out.write("                                                <td colspan=\"2\"></td>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                            <tr height=\"20\">\r\n");
      out.write("                                                <td style=\"padding:0px 10px 0px 0px\"><img src=\"imgs/Login_password_img.gif\" width=\"69\" height=\"20\" border=\"0\"></td>\r\n");
      out.write("                                                <td><input type=\"password\" name=\"pwd\" onKeyUp=\"goEnterSubmit()\" style=\"width:85px;height:14px;font-size:7px; ime-mode:inactive;\"></td>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                        </table>\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                    <td align=\"left\" width=\"203\"><a href=\"javascript:func_loginCommit();\" onMouseOut=\"MM_swapImgRestore()\" onMouseOver=\"MM_swapImage('Image17','','imgs/Login_login_p_btn.gif',1)\"><img src=\"imgs/Login_login_n_btn.gif\"  name=\"Image17\" width=\"48\" height=\"42\" border=\"0\"></a></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"10\">\r\n");
      out.write("                                    <td colspan=\"2\"></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"20\">\r\n");
      out.write("                                    <td colspan=\"2\">\r\n");
      out.write("                                        <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" >\r\n");
      out.write("                                            <tr>\r\n");
      out.write("                                                <td width=\"180\"><a href=\"javascript:func_find();\">아이디/비밀번호 찾기</a></td>\r\n");
      out.write("                                                <td><input type=\"checkbox\" name=\"id_save\">아이디 저장</td>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                        </table>\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr height=\"10\">\r\n");
      out.write("                                    <td colspan=\"2\"></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                            </table>\r\n");
      out.write("                        </td>\r\n");
      out.write("                    </tr>\r\n");
      out.write("                </table>\r\n");
      out.write("            <td>\r\n");
      out.write("        </tr>\r\n");
      out.write("        <tr>\r\n");
      out.write("            <td height=\"22\"><img src=\"imgs/Login_copybg_img.gif\" width=\"1000\" height=\"22\" border=\"0\"></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("    </table>\r\n");
      out.write("</form>    \r\n");
      out.write("</BODY>\r\n");
      out.write("</HTML>\r\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
      }
    } finally {
      if (_jspxFactory != null) _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
