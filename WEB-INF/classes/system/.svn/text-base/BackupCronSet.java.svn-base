package system;
import java.io.IOException;
import framework.Shell.*;
import framework.log.*;
public class BackupCronSet {
	//public String strDestFile="/var/cron/tabs/root";
	public String strDestFile="D:\\etc\\root";
	public String osType="";
	public BackupCronSet(){
		java.util.Properties p = System.getProperties(); 
		osType=(String)p.getProperty("os.name");
		if(osType==null)osType="";
		osType=osType.toLowerCase();
		System.out.println(osType);
		if(osType.indexOf("win")==-1){
			strDestFile="/var/cron/tabs/root";
		}else{
			strDestFile="D:\\etc\\root";
		}
		
	}
	public int setBackupCronShellTime(String strbackupKeyWord,String after){
		LinuxShell linuxShell=new LinuxShell();
    	CronChange cronChange	=	null;
    	try{
    		cronChange	=	new CronChange(strDestFile);
    		cronChange.write(strbackupKeyWord, after);
    		if(osType.indexOf("win")==-1){
    			linuxShell.runShell("/etc/rc.d/cron restart");
    		}
    	}catch(Exception ex){
    		return 0;
    	}
		return 1;
	}
	public String getBackupCronShellTime(String strbackupKeyWord){
		CronChange cronChange	=	null;
		try {
			cronChange	=	new CronChange(strDestFile);
			return cronChange.getCronData(strbackupKeyWord);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return null;
	}
}
