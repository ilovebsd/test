package bizportal.nasacti.ipivr.action.admin;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import bizportal.nasacti.ipivr.action.CommandAction;
import bizportal.nasacti.ipivr.common.IpivrConfig;
import bizportal.nasacti.ipivr.dao.ResponseModeDAO;
import bizportal.nasacti.ipivr.dao.IvrTelDAO;
import java.text.DecimalFormat;
import java.util.List;
import java.util.ArrayList;
import bizportal.nasacti.ipivr.dao.KeyActionDAO;
import bizportal.nasacti.ipivr.dao.ModeSettingDAO;
import bizportal.nasacti.ipivr.dto.ModeSettingDTO;
import bizportal.nasacti.ipivr.dto.ResponseModeDTO;
import bizportal.nasacti.ipivr.dto.UsedVoiceDTO;
import bizportal.nasacti.ipivr.dao.VoiceDAO;
import bizportal.nasacti.ipivr.dto.VoiceDTO;
import bizportal.nasacti.ipivr.dao.ResponseTimeDAO;

public class VoiceGuideSettingEditFormAction implements CommandAction {
	/**
	 * requestProc
	 *
	 * @param request HttpServletRequest
	 * @param response HttpServletResponse
	 * @param ipivrConfig IpivrConfig
	 * @return String
	 * @throws Throwable
	 * @todo Implement this bizportal.nasacti.ipivr.action.CommandAction
	 *   method
	 */
	public String requestProc(HttpServletRequest request,
							  HttpServletResponse response,
							  IpivrConfig ipivrConfig) throws Throwable {
        String strAdIndex = request.getParameter("adIndex");

		ModeSettingDAO modeSettingDAO = ModeSettingDAO.getInstance();
		ModeSettingDTO modeSettingDTO = modeSettingDAO.getModeSetting(strAdIndex);

		IvrTelDAO ivrTelDAO = IvrTelDAO.getInstance();
		List ivrTelDTOList = ivrTelDAO.getActiveIvrTel();

		ResponseTimeDAO responseTimeDAO = ResponseTimeDAO.getInstance();
		List responseTimeDTOList = responseTimeDAO.getAllResponseTime();


	    request.setAttribute("modeSettingDTO", modeSettingDTO);
		request.setAttribute("ivrTelDTOList", ivrTelDTOList);
		request.setAttribute("responseTimeDTOList", responseTimeDTOList);


		return "/ivr/voiceGuideSettingEdit.jsp";
	}
}
