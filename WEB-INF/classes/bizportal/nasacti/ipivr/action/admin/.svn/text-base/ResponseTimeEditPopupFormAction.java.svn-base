package bizportal.nasacti.ipivr.action.admin;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import bizportal.nasacti.ipivr.action.CommandAction;
import bizportal.nasacti.ipivr.common.IpivrConfig;
import bizportal.nasacti.ipivr.dao.ResponseModeDAO;
import java.util.List;
import java.text.DecimalFormat;
import java.util.ArrayList;

public class ResponseTimeEditPopupFormAction implements CommandAction {
	/**
	 * requestProc
	 *
	 * @param request HttpServletRequest
	 * @param response HttpServletResponse
	 * @param ipivrConfig IpivrConfig
	 * @return String
	 * @throws Throwable
	 * @todo Implement this bizportal.nasacti.ipivr.action.CommandAction
	 *   method
	 */
	public String requestProc(HttpServletRequest request,
							  HttpServletResponse response,
							  IpivrConfig ipivrConfig) throws Throwable {
		String strTime1 = request.getParameter("time1");
		String strTime2 = request.getParameter("time2");
		String strScCode = request.getParameter("scCode");
		String strTrIdx = request.getParameter("trIdx");
		String strType = request.getParameter("type");

		ResponseModeDAO responseModeDAO = ResponseModeDAO.getInstance();

		List responseModeDTOList = responseModeDAO.getAllResponseMode(ResponseModeDAO.ACTIVE_IVR);


		DecimalFormat df = new DecimalFormat("00");

		List hourList = new ArrayList();
		for(int i=0; i < 24; i++)
			hourList.add(df.format(i));

		List minuteList = new ArrayList();
		for(int i=0; i < 60; i++)
			minuteList.add(df.format(i));

		request.setAttribute("responseModeDTOList", responseModeDTOList);
		request.setAttribute("hourList", hourList);
		request.setAttribute("minuteList", minuteList);
		request.setAttribute("time1", strTime1);
		request.setAttribute("time2", strTime2);
		request.setAttribute("scCode", strScCode);
		request.setAttribute("trIdx", strTrIdx);
		request.setAttribute("type", strType);



		return "/ivr/responseTimeEditPopup.jsp";

	}
}
