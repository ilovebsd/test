package com.acromate.dataio.common ;

import com.acromate.data.DataIO;
import com.acromate.util.Str;
import com.acromate.util.Logger;

public class ParamDIO extends DataIO {
    private Logger log = Logger.getLogger(this.getClass());

    private int    errorcode;
    private StringBuilder name = new StringBuilder();
    private StringBuilder values = new StringBuilder();

    public String getName() { return name.toString() ; }
    public void   setName( String name ) {
        this.name.delete(0,this.name.length());
        this.name.append(name) ;
    }

    public String getValue() { return values.toString() ; }
    public void   setValue( String values ) {
        this.values.delete(0,this.values.length());
        this.values.append(values) ;
    }

    protected int setFieldData(String field, String value) {
        StringBuilder temp = new StringBuilder(field.toLowerCase());
        if(compareFieldID(temp, "name".toLowerCase()) == true) {
            return setString(name, value);
        }
        if(compareFieldID(temp, "value".toLowerCase()) == true) {
            return setString(values, value);
        }
        log.error("ParamDIO - Not founded field :" + field);
        return 0;
    }

    protected int getFieldData(String field, Index idx, StringBuilder value) {
        boolean resultVal = false;
        StringBuilder fldAlias;
        if(field != null && !field.equals("")) resultVal = true;
        if(field == null) {
            fldAlias = new StringBuilder(); fldAlias.append("");
        } else {
           fldAlias  = new StringBuilder(); fldAlias.append(field);
        }
        if(compareFieldID(fldAlias, "name", idx, value) == true) {
            errorcode = getString(name.toString(), value, !resultVal);
            if(resultVal || errorcode < 0) return errorcode;
        }
        if(compareFieldID(fldAlias, "value", idx, value) == true) {
            errorcode = getString(values.toString(), value, !resultVal);
            if(resultVal || errorcode < 0) return errorcode;
        }
        return(0);
    }
}
