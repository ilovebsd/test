package com.acromate.dataio.noms ;

import java.util.ArrayList;

import org.apache.log4j.Logger;
import com.acromate.data.DataIO;
import com.acromate.data.ListIO;
import com.acromate.util.Str;

public class ShelfHolderDIO extends ListIO {
    private Logger log = Logger.getLogger(this.getClass());

    private int    errorcode;
    private StringBuilder shelfId = new StringBuilder();

    public String getShelfId() { return shelfId.toString() ; }
    public void   setShelfId( String shelfId ) {
        this.shelfId.delete(0,this.shelfId.length());
        this.shelfId.append(shelfId) ;
    }


    protected int setFieldData(String field, String value) {
        StringBuilder temp = new StringBuilder(field.toLowerCase());
        if(compareFieldID(temp, "shelfId".toLowerCase()) == true) {
            return setString(shelfId, value);
        }
        int result = super.setFieldData( field,  value);
        if (result == 0 ) return result;
        log.error("ShelfHolderDIO - Not founded field :" + field);
        return super.setFieldData(field, value);
    }

    protected int getFieldData(String field, Index idx, StringBuilder value) {
        boolean resultVal = false;
        StringBuilder fldAlias;
        if(field != null && !field.equals("")) resultVal = true;
        if(field == null) {
            fldAlias = new StringBuilder(); fldAlias.append("");
        } else {
           fldAlias  = new StringBuilder(); fldAlias.append(field);
        }
        if(compareFieldID(fldAlias, "shelfId", idx, value) == true) {
            errorcode = getString(shelfId.toString(), value, !resultVal);
            if(resultVal || errorcode < 0) return errorcode;
        }
        return super.getFieldData(field, idx, value);
    }
    protected DataIO newListNode() {
       return new SlotHolderDIO();
    }
    public String toXmlString( String blank ) {
        StringBuilder xml = new StringBuilder() ;
        int size = 0;
		xml.append ( blank+"   <shelfId>" + getShelfId() + "</shelfId>\n") ;
        xml.append("      <slotHolder>\n");
        ArrayList slotHolderList = getList();
        if (slotHolderList != null) {
        	size = slotHolderList.size();
        	for (int i = 0; i < size; i++) {
        		SlotHolderDIO slotHolder = (SlotHolderDIO)slotHolderList.get(i);
        		xml.append("            <item>\n");
        		String str = slotHolder.toXmlString("         ");
        		xml.append(str);
        		xml.append("            </item>\n"); //
        	}
        }
        xml.append("      </slotHolder>\n"); //

        return xml.toString();
    }
}
