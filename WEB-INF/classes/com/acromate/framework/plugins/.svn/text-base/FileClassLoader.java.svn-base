package com.acromate.framework.plugins;

import java.io.*;

/**
*
* @author 아크로메이트 기술연구소
* @version 1.0.0
*/
public class FileClassLoader extends ClassLoader {
	private String path;
	private String fileName;
	
	/**
	 * 
	 * @param rootDir
	 * @throws FileNotFoundException
	 */
	public FileClassLoader(String fileName) throws FileNotFoundException {
		super(FileClassLoader.class.getClassLoader() );
		this.setFileName(fileName);
		File file = new File(fileName);
        try {
			path = file.getCanonicalPath();
			System.out.println(path);
		} catch (IOException e) {
			e.printStackTrace();
		}	
		
		
	}
	 
	/**
	 * 
	 * @return
	 */
	public String getPackageName(){
		Package pack = getClass().getPackage();
		if(pack != null)
		{
			return pack.getName();
		}else return null;
	}

	/**
	 * 
	 * @param fileName
	 */
	public void setFileName(String fileName) {
		this.fileName = fileName;
	}

	/**
	 * 
	 * @return
	 */
	public String getFileName() {
		return fileName;
	}
	
	@SuppressWarnings("unchecked")
	protected Class findClass(String name) throws ClassNotFoundException {
	    try {
	       	         
	       FileInputStream file = new FileInputStream(path);
	       byte[] classByte = new byte[file.available()];
	       file.read(classByte);	         
	       return defineClass(name, classByte, 0, classByte.length);
	    } catch(IOException ex) {
	       throw new ClassNotFoundException();
	    }
	}
}
